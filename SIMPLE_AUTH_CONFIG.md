# 🔐 wxchat 鉴权功能 - 超简单配置指南

## 🎯 一分钟快速配置

### 步骤1：部署应用
```bash
npm run deploy
```

### 步骤2：配置密码
1. 打开 [Cloudflare Dashboard](https://dash.cloudflare.com/)
2. 进入 **Workers & Pages** → 选择你的 **wxchat** 应用
3. 点击 **设置** → **变量和机密**
4. 点击 **添加变量** 按钮

### 步骤3：添加必需的环境变量

#### 🔑 访问密码（必需）
```
变量名: ACCESS_PASSWORD
值: 你的密码 (例如: mypassword123)
```

#### 🔐 JWT密钥（必需）
```
变量名: JWT_SECRET
值: 你的JWT密钥 (例如: my-super-secret-jwt-key-for-wxchat-2024)
```

#### ⏰ 会话时长（可选）
```
变量名: SESSION_EXPIRE_HOURS
值: 24 (24小时后需要重新登录)
```

#### 🛡️ 登录限制（可选）
```
变量名: MAX_LOGIN_ATTEMPTS
值: 5 (最多尝试5次)
```

### 步骤4：保存并完成
点击 **保存** 按钮，配置立即生效！

## 🚀 使用方法

1. **访问应用** - 打开你的wxchat应用URL
2. **自动跳转** - 系统自动跳转到登录页面
3. **输入密码** - 输入你在步骤3中设置的密码
4. **开始使用** - 登录成功后即可正常使用所有功能

## 🔧 修改密码

想要修改密码？超级简单：

1. 进入 Cloudflare Dashboard
2. Workers & Pages → wxchat → 设置 → 变量和机密
3. 找到 `ACCESS_PASSWORD` 变量
4. 点击 **编辑** 按钮
5. 输入新密码
6. 点击 **保存**

**立即生效！** 无需重新部署！

## 🛡️ 安全提示

- ✅ 使用强密码（建议包含字母、数字、特殊字符）
- ✅ 定期更换密码
- ✅ 不要在公共场所保存密码
- ✅ JWT密钥建议使用32位以上随机字符串

## ❓ 常见问题

### Q: 忘记密码怎么办？
A: 在Cloudflare控制台重新设置 `ACCESS_PASSWORD` 环境变量即可

### Q: 为什么一直要求登录？
A: 检查 `JWT_SECRET` 是否正确配置，建议使用32位以上字符串

### Q: 登录尝试次数过多怎么办？
A: 等待15分钟后重试，或清除浏览器localStorage

### Q: 可以设置多个密码吗？
A: 目前只支持单一密码，如需多用户可考虑扩展功能

## 🎉 完成！

配置完成后，你的wxchat应用就拥有了安全的访问控制功能！

**特点：**
- 🔒 密码保护访问
- 🎨 WeChat风格登录界面  
- 🛡️ 防暴力破解保护
- ⚡ 自动会话管理
- 📱 完美移动端适配

享受安全的文件传输体验吧！ 🚀
